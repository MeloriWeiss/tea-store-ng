"use strict";(self.webpackChunkControlWork22_tea=self.webpackChunkControlWork22_tea||[]).push([[808],{808:(Z,p,n)=>{n.r(p),n.d(p,{ProductsModule:()=>T});var u=n(6895),s=n(5450),l=n(8505),t=n(8256),a=n(4736);const h=function(e){return["/products",e]};let m=(()=>{class e{constructor(){this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-card"]],inputs:{product:"product"},decls:11,vars:6,consts:[[1,"col"],[1,"card","w-100","h-100"],[1,"open-image"],["alt","Image one",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column"],[1,"card-title","fw-bold","mb-3"],[1,"card-text","mb-4","product-description"],["type","button",1,"btn","btn-primary","hvr-sweep-to-top","mt-auto",2,"width","10rem",3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h5",5),t._uU(6),t.qZA(),t.TgZ(7,"p",6),t._uU(8),t.qZA(),t.TgZ(9,"a",7),t._uU(10," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 "),t.qZA()()()()),2&o&&(t.xp6(3),t.s9C("src",r.product.image,t.LSH),t.xp6(3),t.Oqu(r.product.title),t.xp6(2),t.Oqu(r.product.description),t.xp6(1),t.Q6J("routerLink",t.VKq(4,h,r.product.id)))},dependencies:[s.yS],styles:[".product-description[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:4;line-clamp:4;-webkit-box-orient:vertical}"]}),e})();const f=["title"];function g(e,c){1&e&&t._UZ(0,"product-card",7),2&e&&t.Q6J("product",c.$implicit)}function b(e,c){1&e&&(t.TgZ(0,"section",8),t._UZ(1,"div",9),t.qZA())}let v=(()=>{class e{constructor(o,r,i){this.productsService=o,this.router=r,this.rend=i,this.products=[],this.showLoader=!1,this.subscription=null,this.subscriptionSubjectSearch=null,this.searchText="",this.productsWithSearch=!1,this.title=null}ngOnInit(){this.getProducts(),this.subscriptionSubjectSearch=this.productsService.subjectSearch.subscribe(o=>{this.searchText=o,this.productsWithSearch=!!o,this.getProducts()})}getProducts(){this.showLoader=!0,this.subscription=this.productsService.getProducts().pipe((0,l.b)(()=>{this.showLoader=!1})).subscribe({next:o=>{this.changeTitle(0===o.length?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":this.productsWithSearch?`\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443: ${this.searchText}`:"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),this.products=o},error:o=>{console.log(o),this.router.navigate(["/"]).then()}})}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscriptionSubjectSearch?.unsubscribe()}changeTitle(o){this.rend.setProperty(this.title?.nativeElement,"innerText",o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.s),t.Y36(s.F0),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],viewQuery:function(o,r){if(1&o&&t.Gf(f,5),2&o){let i;t.iGM(i=t.CRH())&&(r.title=i.first)}},decls:9,vars:2,consts:[[1,"container","col-md-8","col-sm-10","col-12","my-5","py-5","min-vh-100"],[1,"text-center","mb-5"],[1,"fs-2","fw-bold"],["title",""],[1,"row","wow","animate__backInRight","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4","d-flex","justify-content-center"],[3,"product",4,"ngFor","ngForOf"],["class","loader-block",4,"ngIf"],[3,"product"],[1,"loader-block"],[1,"loader"]],template:function(o,r){1&o&&(t.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2,3),t._uU(5,"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,g,1,1,"product-card",5),t.qZA()()(),t.YNc(8,b,2,0,"section",6)),2&o&&(t.xp6(7),t.Q6J("ngForOf",r.products),t.xp6(1),t.Q6J("ngIf",r.showLoader))},dependencies:[u.sg,u.O5,m],styles:[".loader-block[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;background-color:#0000006e;display:flex;justify-content:center;align-items:center;z-index:10000}.loader[_ngcontent-%COMP%]{width:150px;height:150px;border:15px solid #b8e4ff;border-top-color:#076bff;border-radius:50%;animation:spin 1s ease infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();var C=n(5237);const y=[{path:"",component:v},{path:":id",component:(()=>{class e{constructor(o,r,i,d){this.activatedRoute=o,this.productsService=r,this.router=i,this.cartService=d,this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){this.activatedRoute.params.subscribe(o=>{o.id&&this.productsService.getProducts().subscribe({next:r=>{const i=r.find(d=>d.id===+o.id);i&&(this.product=i)},error:r=>{console.log(r),this.router.navigate(["/"]).then()}})})}addToCart(){this.cartService.productTitle=this.product.title}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.gz),t.Y36(a.s),t.Y36(s.F0),t.Y36(C.N))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product"]],decls:14,vars:7,consts:[[1,"col"],[1,"w-100","h-100","my-5","py-5"],[1,"open-image","col-3","mx-auto"],["alt","Image one",1,"card-img-top",3,"src"],[1,"price","text-end"],[1,"card-body","col-7","d-flex","flex-column","mx-auto","text-center"],[1,"card-title","fw-bold","mb-5"],[1,"card-text","mb-5","product-description"],["routerLink","/order","type","button",1,"btn","btn-primary","hvr-sweep-to-top","mx-auto",2,"width","10rem",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"div",4),t._uU(5),t.ALo(6,"currency"),t.qZA()(),t.TgZ(7,"div",5)(8,"h5",6),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA(),t.TgZ(12,"a",8),t.NdJ("click",function(){return r.addToCart()}),t._uU(13," \u041a\u0443\u043f\u0438\u0442\u044c "),t.qZA()()()()),2&o&&(t.xp6(3),t.s9C("src",r.product.image,t.LSH),t.xp6(2),t.Oqu(t.xi3(6,4,r.product.price,"\u0440\u0443\u0431.")),t.xp6(4),t.Oqu(r.product.title),t.xp6(2),t.Oqu(r.product.description))},dependencies:[s.yS,u.H9]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(y),s.Bz]}),e})();var x=n(4466);let T=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,x.m,s.Bz,P]}),e})()}}]);